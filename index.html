<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–§–∏–Ω–∞–Ω—Å—ã</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 16px;
    }
    .card {
      background: white;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 12px;
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background: #2a9d8f;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="card">
  <h2>üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</h2>
</div>

<div class="card">
  <h3>‚ûï –†–∞—Å—Ö–æ–¥</h3>
  <input id="expenseAmount" placeholder="–°—É–º–º–∞">
  <input id="expenseCategory" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–µ–¥–∞, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç)">
  <button onclick="sendExpense()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
</div>

<div class="card">
  <h3>üí∞ –î–æ—Ö–æ–¥</h3>
  <input id="incomeAmount" placeholder="–°—É–º–º–∞">
  <button onclick="sendIncome()">–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</button>
</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();
  tg.expand();

  const API_URL = "https://–¢–í–û–ô-RAILWAY-URL.up.railway.app";

  async function sendExpense() {
    const amount = document.getElementById("expenseAmount").value;
    const category = document.getElementById("expenseCategory").value;

    await fetch(API_URL + "/expense", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ amount: Number(amount), category })
    });

    tg.showAlert("–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω");
  }

  async function sendIncome() {
    const amount = document.getElementById("incomeAmount").value;

    await fetch(API_URL + "/income", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ amount: Number(amount) })
    });

    tg.showAlert("–î–æ—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω");
  }
</script>

</body>
</html>
